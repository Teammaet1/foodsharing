<!DOCTYPE html>

<head>
<title>Foodsharing</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="../css/layout.css" rel="stylesheet" type="text/css" media="all">
</head>
<body style="background-image: url('../images/demo/backgrounds/1.jpg'); min-height: 100vh; max-height: auto; background-repeat: no-repeat; background-size: cover; background-position: center center; color: black; text-align: center; display: flex; flex-direction: column; justify-content: space-between; ">

<div style="align-items: center"class="wrapper row2">
  <nav id="mainav" class="hoc clear">
    <!-- ################################################################################################ -->
    <ul class="clear">
      <li><a href="index.html">Главная</a></li>
      <li><a href="to-volonteers.html">Участникам</a></li>
      <li><a href="sidebar-right.html">Sidebar Right</a></li>
      <li ><a href="volonterstvo.html">Волонтерство</a></li>
      <li><a href="FAQ.html">Справка</a></li>
      <li class="active"><a href="../pages/tutor.html">Личный кабинет</a></li>
    </ul>
  </nav>
</div>


<div class="wrapper bgded" >
  <div id="pageintro" class="hoc clear">
</div>

<div style="margin-bottom: 280px;" class="wrapper row3">
  <main class="hoc container clear">

    <div class="center btmspace-50">
      <h2 class="heading">ЛИЧНЫЙ КАБИНЕТ</h2>

        <form>
            <a href="myvolonters.html" class="custom-btn btn-3"><span>Мои волонтеры</span></a>
            <button class="custom-btn btn-3"><span>Мои данные</span></button>
            <button class="custom-btn btn-3"><span>Заказы</span></button>
            <button class="custom-btn btn-3"><span>Список магазинов</span></button>
            <button class="custom-btn btn-3"><span>Выйти</span></button>
            </form>
    </div>

    <div class="clear"></div>
  </main>
</div>


    <script>
        async function Authorize() {
            const response = await fetch("https://localhost:7285/Account/Authorize", {
                method: "GET",
                headers: { "Accept": "application/json" }
            });
            if (response.ok === false) {
                window.location.href = '/index.html';
            }
            else
                Role();
        }

        async function Role() {
            const response = await fetch("https://localhost:7285/Account/AuthorizeRole", {
                method: "GET",
                headers: { "Accept": "application/json" }
            });
            if (response.ok === true) {
                const resStr = await response.json();
                let exit = true
                resStr.forEach(str => {
                    if (str === "tutor")
                        exit = false;
                })
                if (exit)
                    window.location.href = '/index.html';
            }

        }

        Authorize();
    </script>
</body>
</html>
